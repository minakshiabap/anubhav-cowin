<mvc:View xmlns:core="sap.ui.core" controllerName="cowin.cowin.controller.View2" xmlns:mvc="sap.ui.core.mvc" displayBlock="true" xmlns="sap.m" xmlns:microchart="sap.suite.ui.microchart" xmlns:viz="sap.viz.ui5.controls" xmlns:layout="sap.ui.layout" xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds" xmlns:viz.data="sap.viz.ui5.data">
    <Page id="page" title="Dashboard" titleAlignment="Center" navButtonPress="onBack" showNavButton="true">
        <content>
            <Toolbar>
                <ToolbarSpacer />
                <Select id="dashState" items="{local>/states}" change="onDashStateChange" width="250px" forceSelection="false">
                    <items>
                        <core:ListItem text="{local>state_name}" key="{local>state_id}" />
                    </items>
                </Select>
                <Select id="dashCity" items="{local>/districts}" forceSelection="false" width="250px" change="onDashCityChange">
                    <items>
                        <core:ListItem text="{local>district_name}" key="{local>district_id}" />
                    </items>
                </Select>
            </Toolbar>
            <HBox width="100%">
                <GenericTile class="sapUiLargeMarginBegin sapUiSmallMarginTop" header="Total Centers for" subheader="Vaccination" press="press" frameType="Auto">
                    <TileContent unit="{local>/TileData/city}" footer="{local>/TileData/state}">
                        <NumericContent valueColor="Good" value="{local>/TileData/total_centers}" icon="sap-icon://accidental-leave" withMargin="false" />
                    </TileContent>
                </GenericTile>
                <HBox width="100%" justifyContent="SpaceAround" class="sapUiSmallMarginTop saUiLargeMarginBegin">
                    <FlexBox width="20rem" height="10rem" alignContent="Center" justifyContent="SpaceBetween">
                        <items>
                            <microchart:InteractiveDonutChart selectionChanged="onDonutSelect">
                                <microchart:segments>
                                    <microchart:InteractiveDonutChartSegment label="{local>/ChartData/0/vaccine}" value="{local>/ChartData/0/percentage}" displayedValue="{local>/ChartData/0/value}" />
                                    <microchart:InteractiveDonutChartSegment label="{local>/ChartData/1/vaccine}" value="{local>/ChartData/1/percentage}" displayedValue="{local>/ChartData/1/value}" />
                                    <microchart:InteractiveDonutChartSegment label="{local>/ChartData/2/vaccine}" value="{local>/ChartData/2/percentage}" displayedValue="{local>/ChartData/2/value}" />
                                </microchart:segments>
                            </microchart:InteractiveDonutChart>                    
                        </items>
                        
                    </FlexBox>
                    <FlexBox width="30rem" height="15rem" alignContent="Center" justifyContent="SpaceBetween">
                        <items>
                            <microchart:InteractiveBarChart labelWidth="25%" selectionChanged="onBarSelect">
                                <microchart:bars>
                                    <microchart:InteractiveBarChartBar label="Age 45+" value="{local>/ageChartData/age45}" color="Neutral" />
                                    <microchart:InteractiveBarChartBar label="Age 18+" value="{local>/ageChartData/age18}" color="Neutral" />
                                    <!-- <microchart:InteractiveBarChartBar label="Product 3" value="70"/> -->
                                </microchart:bars>
                            </microchart:InteractiveBarChart>
                        </items>
                    </FlexBox>

                </HBox>
            </HBox>
            <Table id="centerDataTable" items="{path: 'local>/center_data', sorter:{path: 'block_name'}}" alternateRowColors="true" inset="true">
                <headerToolbar>
                    <Toolbar>
                        <Title text="Center Details" />
                        <ToolbarSpacer />
                        <Button icon="sap-icon://download" text="Excel" type="Ghost" press="onExcelExport"/>
                    </Toolbar>
                </headerToolbar>
                <columns>
                    <Column>
                        <Label text="Center Name" />
                    </Column>
                    <Column hAlign="Center">
                        <Label text="Age Group" />
                    </Column>
                    <Column>
                        <Label text="Vaccine" />
                    </Column>
                    <Column hAlign="Center">
                        <Label text="Available Dose 1" />
                    </Column>
                    <Column hAlign="Center">
                        <Label text="Avaliable Dose 2" />
                    </Column>
                    <Column>
                        <Label text="Block" />
                    </Column>
                    <Column>
                        <Label text="Pincode" />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{local>name}" />
                            <Text text="{local>min_age_limit}+" />
                            <Text text="{local>vaccine}" />
                            <Text text="{local>available_capacity_dose1}" />
                            <Text text="{local>available_capacity_dose2}" />
                            <Text text="{local>block_name}" />
                            <Text text="{local>pincode}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>


</mvc:View>
